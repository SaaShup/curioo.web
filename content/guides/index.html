<div class="container">
    <div id="map" style="height: 800px;" class="my-3">
    </div>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script type='text/javascript' src='https://unpkg.com/leaflet.markercluster@1.4.1/dist/leaflet.markercluster.js'>
    </script>
    <script type="text/javascript">
        var lat = 48.689958;
        var lon = 6.174794;
        var macarte = null;
        var markerClusters;
        var cities = {};
        function initMap() {
            macarte = L.map('map').setView([lat, lon], 7);
            markerClusters = L.markerClusterGroup();
            L.tileLayer('https://{s}.tile.openstreetmap.fr/osmfr/{z}/{x}/{y}.png', {
                attribution: 'curioocity',
                minZoom: 7,
                maxZoom: 15
            }).addTo(macarte);
            for (city in cities) {
                var marker = L.marker([cities[city].latitude, cities[city].longitude], {
                });
                marker.bindPopup(cities[city].name);
                markerClusters.addLayer(marker);
            }
            macarte.addLayer(markerClusters);
        }
        window.onload = async function () {
            const response = await fetch("https://auth.curioo.city/functions/v1/cities-v2");
            cities = await response.json();
            initMap();
        };
    </script>
</div>